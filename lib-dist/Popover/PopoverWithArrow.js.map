{"version":3,"sources":["../../src/Popover/PopoverWithArrow.js"],"names":["styles","root","display","PopoverDefault","props","context","timeout","renderLayer","arrow","animated","animation","anchorEl","anchorOrigin","autoCloseWhenOffScreen","canAutoPosition","children","onRequestClose","style","targetOrigin","useLayerForClickAway","other","styleRoot","position","zIndex","muiTheme","popover","state","open","Animation","closing","componentClickAway","event","preventDefault","requestClose","setPlacement","scrolling","refs","layer","getLayer","targetEl","arrowEl","anchor","getAnchorPosition","target","getTargetPosition","targetPosition","top","vertical","left","horizontal","applyAutoPositionIfNeeded","Math","max","maxHeight","window","innerHeight","bottom","height","handleResize","handleScroll","bind","componentDidMount","componentWillReceiveProps","nextProps","clearTimeout","setState","setTimeout","componentDidUpdate","componentWillUnmount","cancel","reason","el","findDOMNode","rect","getBoundingClientRect","a","width","offsetWidth","offsetHeight","right","document","activeElement","tagName","middle","center","anchorPosition","innerWidth","getOverlapMode","median","indexOf","getPositions","t","positions","x","filter","p","y","overlap","splice","anchorPos","newTop","newLeft","render","propTypes","object","origin","bool","func","node","className","string","zDepth","defaultProps","overflowY","contextTypes","isRequired"],"mappings":"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","file":"PopoverWithArrow.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport EventListener from 'react-event-listener';\nimport RenderToLayer from '../internal/RenderToLayer';\nimport propTypes from '../utils/propTypes';\nimport Paper from '../Paper';\nimport throttle from 'lodash.throttle';\nimport PaperDefault from '../Paper/PaperWithArrow';\nimport PopoverAnimationDefault from './PopoverAnimationDefault';\nimport {isIOS, getOffsetTop} from '../utils/iOSHelpers';\n\nconst styles = {\n  root: {\n    display: 'none',\n  },\n};\n\nexport default class PopoverDefault extends Component {\n  static propTypes = {\n    anchorEl: PropTypes.object,\n    anchorOrigin: propTypes.origin,\n    animated: PropTypes.bool,\n    animation: PropTypes.func,\n    autoCloseWhenOffScreen: PropTypes.bool,\n    canAutoPosition: PropTypes.bool,\n    children: PropTypes.node,\n    className: PropTypes.string,\n    onRequestClose: PropTypes.func,\n    open: PropTypes.bool,\n    style: PropTypes.object,\n    targetOrigin: propTypes.origin,\n    useLayerForClickAway: PropTypes.bool,\n    zDepth: propTypes.zDepth,\n  };\n\n  static defaultProps = {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'left',\n    },\n    animated: true,\n    autoCloseWhenOffScreen: true,\n    canAutoPosition: true,\n    onRequestClose: () => {},\n    open: false,\n    style: {\n      overflowY: 'auto',\n    },\n    targetOrigin: {\n      vertical: 'top',\n      horizontal: 'left',\n    },\n    useLayerForClickAway: true,\n    zDepth: 1,\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object.isRequired,\n  };\n\n  constructor(props, context) {\n    super(props, context);\n    this.handleResize = throttle(this.setPlacement, 100);\n    this.handleScroll = throttle(this.setPlacement.bind(this, true), 50);\n\n    this.state = {\n      open: props.open,\n      closing: false,\n    };\n  }\n\n  componentDidMount() {\n    this.setPlacement();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.open === this.props.open) {\n      return;\n    }\n\n    if (nextProps.open) {\n      clearTimeout(this.timeout);\n      this.timeout = null;\n      this.anchorEl = nextProps.anchorEl || this.props.anchorEl;\n      this.setState({\n        open: true,\n        closing: false,\n      });\n    } else {\n      if (nextProps.animated) {\n        if (this.timeout !== null) return;\n        this.setState({closing: true});\n        this.timeout = setTimeout(() => {\n          this.setState({\n            open: false,\n          }, () => {\n            this.timeout = null;\n          });\n        }, 500);\n      } else {\n        this.setState({\n          open: false,\n        });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    this.setPlacement();\n  }\n\n  componentWillUnmount() {\n    this.handleResize.cancel();\n    this.handleScroll.cancel();\n\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = null;\n    }\n  }\n\n  timeout = null;\n\n  renderLayer = () => {\n    const {\n      arrow,\n      animated,\n      animation,\n      anchorEl, // eslint-disable-line no-unused-vars\n      anchorOrigin, // eslint-disable-line no-unused-vars\n      autoCloseWhenOffScreen, // eslint-disable-line no-unused-vars\n      canAutoPosition, // eslint-disable-line no-unused-vars\n      children,\n      onRequestClose, // eslint-disable-line no-unused-vars\n      style,\n      targetOrigin,\n      useLayerForClickAway, // eslint-disable-line no-unused-vars\n      ...other\n    } = this.props;\n\n    let styleRoot = style;\n\n    if (!animated) {\n      styleRoot = {\n        position: 'fixed',\n        zIndex: this.context.muiTheme.zIndex.popover,\n      };\n\n      if (!this.state.open) {\n        return null;\n      }\n\n      return (\n        <PaperDefault\n          {...other}\n          arrow={arrow}\n          style={Object.assign(styleRoot, style)}\n        >\n          {children}\n        </PaperDefault>\n      );\n    }\n\n    const Animation = animation || PopoverAnimationDefault;\n\n    return (\n      <Animation\n        {...other}\n        style={styleRoot}\n        targetOrigin={targetOrigin}\n        open={this.state.open && !this.state.closing}\n      >\n        {children}\n      </Animation>\n    );\n  };\n\n  requestClose(reason) {\n    if (this.props.onRequestClose) {\n      this.props.onRequestClose(reason);\n    }\n  }\n\n  componentClickAway = (event) => {\n    event.preventDefault();\n    this.requestClose('clickAway');\n  };\n\n  getAnchorPosition(el) {\n    if (!el) { el = ReactDOM.findDOMNode(this); }\n\n    const rect = el.getBoundingClientRect();\n    const a = {\n      top: rect.top,\n      left: rect.left,\n      width: el.offsetWidth,\n      height: el.offsetHeight,\n    };\n\n    a.right = rect.right || a.left + a.width;\n\n    // The fixed positioning isn't respected on iOS when an input is focused.\n    // We need to compute the position from the top of the page and not the viewport.\n    if (isIOS() && document.activeElement.tagName === 'INPUT') {\n      a.bottom = getOffsetTop(el) + a.height;\n    } else {\n      a.bottom = rect.bottom || a.top + a.height;\n    }\n    a.middle = a.left + ((a.right - a.left) / 2);\n    a.center = a.top + ((a.bottom - a.top) / 2);\n\n    return a;\n  }\n\n  getTargetPosition(targetEl) {\n    return {\n      top: 0,\n      center: targetEl.offsetHeight / 2,\n      bottom: targetEl.offsetHeight,\n      left: 0,\n      middle: targetEl.offsetWidth / 2,\n      right: targetEl.offsetWidth,\n    };\n  }\n\n  setPlacement = (scrolling) => {\n    if (!this.state.open) { return; }\n\n    if (!this.refs.layer.getLayer()) { return; }\n\n    const targetEl = this.refs.layer.getLayer().children[0];\n    const arrowEl = targetEl.children[0];\n    // console.log(\n    //   'PLACEMENT children:', this.refs.layer.getLayer().children,\n    //   '\\nArrow Child:', arrowEl,\n    // );\n\n    if (!targetEl) { return; }\n\n    const {targetOrigin, anchorOrigin} = this.props;\n    const anchorEl = this.props.anchorEl || this.anchorEl;\n    // console.log(\n    //   'ANCHOR ORIGIN:', anchorOrigin,\n    //   'TARGET ORIGIN:', targetOrigin,\n    // );\n\n    const anchor = this.getAnchorPosition(anchorEl);\n    let target = this.getTargetPosition(targetEl);\n    // console.log(\n    //   '\\nANCHOR:', anchor,\n    //   '\\nTARGET:', target,\n    // );\n\n    let targetPosition = {\n      top: anchor[anchorOrigin.vertical] - target[targetOrigin.vertical],\n      left: anchor[anchorOrigin.horizontal] - target[targetOrigin.horizontal],\n    };\n\n    if (scrolling && this.props.autoCloseWhenOffScreen) {\n      this.autoCloseWhenOffScreen(anchor);\n    }\n\n    if (this.props.canAutoPosition) {\n      target = this.getTargetPosition(targetEl); // update as height may have changed\n      targetPosition = this.applyAutoPositionIfNeeded(anchor, target, targetOrigin, anchorOrigin, targetPosition);\n    }\n\n    targetEl.style.top = `${Math.max(0, targetPosition.top)}px`;\n    targetEl.style.left = `${Math.max(0, targetPosition.left)}px`;\n    targetEl.style.maxHeight = `${window.innerHeight}px`;\n\n    if (window.innerHeight - anchor.top > target.bottom) {\n      arrowEl.style.top = `${(anchor.height / 2) - 7}px`;\n      arrowEl.style.bottom = 'auto';\n\n      // arrowEl.style.borderWidth = '0 14px 14px';\n        // arrowEl.style.borderTopWidth = 0;\n        // arrowEl.style.borderBottomWidth = '14px';\n    } else if (window.innerHeight - anchor.top < target.bottom) {\n      arrowEl.style.top = 'auto';\n      arrowEl.style.bottom = `${(anchor.height / 2) - 7}px`;\n\n      //arrowEl.style.borderWidth = '14px 14px 0';\n        // arrowEl.style.borderTopWidth = '14px';\n        // arrowEl.style.borderBottomWidth = 0;\n    } else {\n      arrowEl.style.display = 'none';\n    }\n  };\n\n  autoCloseWhenOffScreen(anchorPosition) {\n    if (anchorPosition.top < 0 ||\n      anchorPosition.top > window.innerHeight ||\n      anchorPosition.left < 0 ||\n      anchorPosition.left > window.innerWidth) {\n      this.requestClose('offScreen');\n    }\n  }\n\n  getOverlapMode(anchor, target, median) {\n    if ([anchor, target].indexOf(median) >= 0) return 'auto';\n    if (anchor === target) return 'inclusive';\n    return 'exclusive';\n  }\n\n  getPositions(anchor, target) {\n    const a = {...anchor};\n    const t = {...target};\n\n    const positions = {\n      x: ['left', 'right'].filter((p) => p !== t.horizontal),\n      y: ['top', 'bottom'].filter((p) => p !== t.vertical),\n    };\n\n    const overlap = {\n      x: this.getOverlapMode(a.horizontal, t.horizontal, 'middle'),\n      y: this.getOverlapMode(a.vertical, t.vertical, 'center'),\n    };\n\n    positions.x.splice(overlap.x === 'auto' ? 0 : 1, 0, 'middle');\n    positions.y.splice(overlap.y === 'auto' ? 0 : 1, 0, 'center');\n\n    if (overlap.y !== 'auto') {\n      a.vertical = a.vertical === 'top' ? 'bottom' : 'top';\n      if (overlap.y === 'inclusive') {\n        t.vertical = t.vertical;\n      }\n    }\n\n    if (overlap.x !== 'auto') {\n      a.horizontal = a.horizontal === 'left' ? 'right' : 'left';\n      if (overlap.y === 'inclusive') {\n        t.horizontal = t.horizontal;\n      }\n    }\n\n    return {\n      positions: positions,\n      anchorPos: a,\n    };\n  }\n\n  applyAutoPositionIfNeeded(anchor, target, targetOrigin, anchorOrigin, targetPosition) {\n    const {positions, anchorPos} = this.getPositions(anchorOrigin, targetOrigin);\n\n    if (targetPosition.top < 0 || targetPosition.top + target.bottom > window.innerHeight) {\n      let newTop = anchor[anchorPos.vertical] - target[positions.y[0]];\n      if (newTop + target.bottom <= window.innerHeight) {\n        targetPosition.top = Math.max(0, newTop);\n      } else {\n        newTop = anchor[anchorPos.vertical] - target[positions.y[1]];\n        if (newTop + target.bottom <= window.innerHeight) {\n          targetPosition.top = Math.max(0, newTop);\n        }\n      }\n    }\n\n    if (targetPosition.left < 0 || targetPosition.left + target.right > window.innerWidth) {\n      let newLeft = anchor[anchorPos.horizontal] - target[positions.x[0]];\n      if (newLeft + target.right <= window.innerWidth) {\n        targetPosition.left = Math.max(0, newLeft);\n      } else {\n        newLeft = anchor[anchorPos.horizontal] - target[positions.x[1]];\n        if (newLeft + target.right <= window.innerWidth) {\n          targetPosition.left = Math.max(0, newLeft);\n        }\n      }\n    }\n\n    return targetPosition;\n  }\n\n  render() {\n    return (\n      <div style={styles.root}>\n        <EventListener\n          target=\"window\"\n          onScroll={this.handleScroll}\n          onResize={this.handleResize}\n        />\n        <RenderToLayer\n          ref=\"layer\"\n          open={this.state.open}\n          componentClickAway={this.componentClickAway}\n          useLayerForClickAway={this.props.useLayerForClickAway}\n          render={this.renderLayer}\n        />\n      </div>\n    );\n  }\n}\n"]}