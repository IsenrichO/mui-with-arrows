{"version":3,"sources":["../../src/internal/ClickAwayListener.js"],"names":["isDescendant","el","target","parentNode","clickAwayEvents","bind","callback","forEach","event","on","document","unbind","off","ClickAwayListener","handleClickAway","defaultPrevented","isCurrentlyMounted","findDOMNode","documentElement","contains","props","onClickAway","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","render","children","propTypes","element","func"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,eAAe,SAAfA,YAAe,CAACC,EAAD,EAAKC,MAAL,EAAgB;AACnC,MAAIA,WAAW,IAAf,EAAqB;AACnB,WAAOD,OAAOC,MAAP,IAAiBF,aAAaC,EAAb,EAAiBC,OAAOC,UAAxB,CAAxB;AACD;AACD,SAAO,KAAP;AACD,CALD;;AAOA,IAAMC,kBAAkB,CAAC,SAAD,EAAY,UAAZ,CAAxB;AACA,IAAMC,OAAO,SAAPA,IAAO,CAACC,QAAD;AAAA,SAAcF,gBAAgBG,OAAhB,CAAwB,UAACC,KAAD;AAAA,WAAW,iBAAOC,EAAP,CAAUC,QAAV,EAAoBF,KAApB,EAA2BF,QAA3B,CAAX;AAAA,GAAxB,CAAd;AAAA,CAAb;AACA,IAAMK,SAAS,SAATA,MAAS,CAACL,QAAD;AAAA,SAAcF,gBAAgBG,OAAhB,CAAwB,UAACC,KAAD;AAAA,WAAW,iBAAOI,GAAP,CAAWF,QAAX,EAAqBF,KAArB,EAA4BF,QAA5B,CAAX;AAAA,GAAxB,CAAd;AAAA,CAAf;;IAEMO,iB;;;;;;;;;;;;0JA2BJC,e,GAAkB,UAACN,KAAD,EAAW;AAC3B,UAAIA,MAAMO,gBAAV,EAA4B;AAC1B;AACD;;AAED;AACA,UAAI,MAAKC,kBAAT,EAA6B;AAC3B,YAAMf,KAAK,mBAASgB,WAAT,OAAX;;AAEA,YAAIP,SAASQ,eAAT,CAAyBC,QAAzB,CAAkCX,MAAMN,MAAxC,KAAmD,CAACF,aAAaC,EAAb,EAAiBO,MAAMN,MAAvB,CAAxD,EAAwF;AACtF,gBAAKkB,KAAL,CAAWC,WAAX,CAAuBb,KAAvB;AACD;AACF;AACF,K;;;8BAlCDc,iB,gCAAoB;AAClB,SAAKN,kBAAL,GAA0B,IAA1B;AACA,QAAI,KAAKI,KAAL,CAAWC,WAAf,EAA4B;AAC1BhB,WAAK,KAAKS,eAAV;AACD;AACF,G;;8BAEDS,kB,+BAAmBC,S,EAAW;AAC5B,QAAIA,UAAUH,WAAV,KAA0B,KAAKD,KAAL,CAAWC,WAAzC,EAAsD;AACpDV,aAAO,KAAKG,eAAZ;AACA,UAAI,KAAKM,KAAL,CAAWC,WAAf,EAA4B;AAC1BhB,aAAK,KAAKS,eAAV;AACD;AACF;AACF,G;;8BAEDW,oB,mCAAuB;AACrB,SAAKT,kBAAL,GAA0B,KAA1B;AACAL,WAAO,KAAKG,eAAZ;AACD,G;;8BAiBDY,M,qBAAS;AACP,WAAO,KAAKN,KAAL,CAAWO,QAAlB;AACD,G;;;4BA3CMC,S,GAAY;AACjBD,YAAU,oBAAUE,OADH;AAEjBR,eAAa,oBAAUS;AAFN,C;kBA8CNjB,iB","file":"ClickAwayListener.js","sourcesContent":["import {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport events from '../utils/events';\n\nconst isDescendant = (el, target) => {\n  if (target !== null) {\n    return el === target || isDescendant(el, target.parentNode);\n  }\n  return false;\n};\n\nconst clickAwayEvents = ['mouseup', 'touchend'];\nconst bind = (callback) => clickAwayEvents.forEach((event) => events.on(document, event, callback));\nconst unbind = (callback) => clickAwayEvents.forEach((event) => events.off(document, event, callback));\n\nclass ClickAwayListener extends Component {\n  static propTypes = {\n    children: PropTypes.element,\n    onClickAway: PropTypes.func,\n  };\n\n  componentDidMount() {\n    this.isCurrentlyMounted = true;\n    if (this.props.onClickAway) {\n      bind(this.handleClickAway);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.onClickAway !== this.props.onClickAway) {\n      unbind(this.handleClickAway);\n      if (this.props.onClickAway) {\n        bind(this.handleClickAway);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.isCurrentlyMounted = false;\n    unbind(this.handleClickAway);\n  }\n\n  handleClickAway = (event) => {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    // IE11 support, which trigger the handleClickAway even after the unbind\n    if (this.isCurrentlyMounted) {\n      const el = ReactDOM.findDOMNode(this);\n\n      if (document.documentElement.contains(event.target) && !isDescendant(el, event.target)) {\n        this.props.onClickAway(event);\n      }\n    }\n  };\n\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default ClickAwayListener;\n"]}