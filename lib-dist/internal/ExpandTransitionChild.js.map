{"version":3,"sources":["../../src/internal/ExpandTransitionChild.js"],"names":["reflow","elem","offsetHeight","ExpandTransitionChild","componentWillUnmount","clearTimeout","enterTimer","enteredTimer","leaveTimer","componentWillAppear","callback","open","componentDidAppear","setAutoHeight","componentWillEnter","props","enterDelay","transitionDelay","transitionDuration","element","findDOMNode","style","height","setTimeout","componentDidEnter","componentWillLeave","refs","wrapper","clientHeight","render","children","other","prepareStyles","context","muiTheme","mergedRootStyles","position","width","top","left","overflow","transition","easeOut","propTypes","node","number","object","defaultProps","contextTypes","isRequired"],"mappings":"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","file":"ExpandTransitionChild.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport transitions from '../styles/transitions';\n\nconst reflow = (elem) => elem.offsetHeight;\n\nclass ExpandTransitionChild extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n    enterDelay: PropTypes.number,\n    style: PropTypes.object,\n    transitionDelay: PropTypes.number,\n    transitionDuration: PropTypes.number,\n  };\n\n  static defaultProps = {\n    enterDelay: 0,\n    transitionDelay: 0,\n    transitionDuration: 450,\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object.isRequired,\n  };\n\n  componentWillUnmount() {\n    clearTimeout(this.enterTimer);\n    clearTimeout(this.enteredTimer);\n    clearTimeout(this.leaveTimer);\n  }\n\n  componentWillAppear(callback) {\n    this.open();\n    callback();\n  }\n\n  componentDidAppear() {\n    this.setAutoHeight();\n  }\n\n  componentWillEnter(callback) {\n    const {enterDelay, transitionDelay, transitionDuration} = this.props;\n    const element = ReactDOM.findDOMNode(this);\n    element.style.height = 0;\n    this.enterTimer = setTimeout(() => this.open(), enterDelay);\n    this.enteredTimer = setTimeout(\n      () => callback(),\n      enterDelay + transitionDelay + transitionDuration\n    );\n  }\n\n  componentDidEnter() {\n    this.setAutoHeight();\n  }\n\n  componentWillLeave(callback) {\n    const {transitionDelay, transitionDuration} = this.props;\n    const element = ReactDOM.findDOMNode(this);\n    // Set fixed height first for animated property value\n    element.style.height = `${this.refs.wrapper.clientHeight}px`;\n    reflow(element);\n    element.style.transitionDuration = `${transitionDuration}ms`;\n    element.style.height = 0;\n    this.leaveTimer = setTimeout(() => callback(), transitionDelay + transitionDuration);\n  }\n\n  setAutoHeight() {\n    const {style} = ReactDOM.findDOMNode(this);\n    style.transitionDuration = 0;\n    style.height = 'auto';\n  }\n\n  open() {\n    const element = ReactDOM.findDOMNode(this);\n    element.style.height = `${this.refs.wrapper.clientHeight}px`;\n  }\n\n  render() {\n    const {\n      children,\n      enterDelay,  // eslint-disable-line no-unused-vars\n      style,\n      transitionDelay, // eslint-disable-line no-unused-vars\n      transitionDuration,\n      ...other\n    } = this.props;\n\n    const {prepareStyles} = this.context.muiTheme;\n\n    const mergedRootStyles = Object.assign({\n      position: 'relative',\n      height: 0,\n      width: '100%',\n      top: 0,\n      left: 0,\n      overflow: 'hidden',\n      transition: transitions.easeOut(\n        `${transitionDuration}ms`,\n        ['height'],\n        `${transitionDelay}ms`\n      ),\n    }, style);\n\n    return (\n      <div {...other} style={prepareStyles(mergedRootStyles)}>\n        <div ref=\"wrapper\">{children}</div>\n      </div>\n    );\n  }\n}\n\nexport default ExpandTransitionChild;\n"]}