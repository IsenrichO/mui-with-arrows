{"version":3,"sources":["../../src/TimePicker/Clock.js"],"names":["Clock","state","selectedTime","mode","setMode","setTimeout","setState","handleSelectAffix","affix","getAffix","hours","getHours","handleChangeHours","finished","time","Date","undefined","setHours","onChangeHours","props","handleChangeMinutes","minutes","setMinutes","onChangeMinutes","componentWillMount","initialTime","format","getSelectedTime","render","clock","context","muiTheme","prepareStyles","timePicker","styles","root","userSelect","container","height","padding","position","boxSizing","circle","top","width","borderRadius","backgroundColor","clockCircleColor","getMinutes","bind","propTypes","oneOf","object","func","defaultProps","contextTypes","isRequired"],"mappings":"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","file":"Clock.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport TimeDisplay from './TimeDisplay';\nimport ClockHours from './ClockHours';\nimport ClockMinutes from './ClockMinutes';\n\nclass Clock extends Component {\n  static propTypes = {\n    format: PropTypes.oneOf(['ampm', '24hr']),\n    initialTime: PropTypes.object,\n    onChangeHours: PropTypes.func,\n    onChangeMinutes: PropTypes.func,\n  };\n\n  static defaultProps = {\n    initialTime: new Date(),\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object.isRequired,\n  };\n\n  state = {\n    selectedTime: null,\n    mode: 'hour',\n  };\n\n  componentWillMount() {\n    this.setState({\n      selectedTime: this.props.initialTime || new Date(),\n    });\n  }\n\n  setMode = (mode) => {\n    setTimeout(() => {\n      this.setState({\n        mode: mode,\n      });\n    }, 100);\n  };\n\n  handleSelectAffix = (affix) => {\n    if (affix === this.getAffix()) return;\n\n    const hours = this.state.selectedTime.getHours();\n\n    if (affix === 'am') {\n      this.handleChangeHours(hours - 12, affix);\n      return;\n    }\n\n    this.handleChangeHours(hours + 12, affix);\n  };\n\n  getAffix() {\n    if (this.props.format !== 'ampm') return '';\n\n    const hours = this.state.selectedTime.getHours();\n    if (hours < 12) {\n      return 'am';\n    }\n\n    return 'pm';\n  }\n\n  handleChangeHours = (hours, finished) => {\n    const time = new Date(this.state.selectedTime);\n    let affix;\n\n    if ( typeof finished === 'string' ) {\n      affix = finished;\n      finished = undefined;\n    }\n    if (!affix) {\n      affix = this.getAffix();\n    }\n    if (affix === 'pm' && hours < 12) {\n      hours += 12;\n    }\n\n    time.setHours(hours);\n    this.setState({\n      selectedTime: time,\n    });\n\n    if (finished) {\n      setTimeout(() => {\n        this.setState({\n          mode: 'minute',\n        });\n\n        const {onChangeHours} = this.props;\n        if (onChangeHours) {\n          onChangeHours(time);\n        }\n      }, 100);\n    }\n  };\n\n  handleChangeMinutes = (minutes, finished) => {\n    const time = new Date(this.state.selectedTime);\n    time.setMinutes(minutes);\n    this.setState({\n      selectedTime: time,\n    });\n\n    const {onChangeMinutes} = this.props;\n    if (onChangeMinutes && finished) {\n      setTimeout(() => {\n        onChangeMinutes(time);\n      }, 0);\n    }\n  };\n\n  getSelectedTime() {\n    return this.state.selectedTime;\n  }\n\n  render() {\n    let clock = null;\n\n    const {\n      prepareStyles,\n      timePicker,\n    } = this.context.muiTheme;\n\n    const styles = {\n      root: {\n        userSelect: 'none',\n      },\n      container: {\n        height: 280,\n        padding: 10,\n        position: 'relative',\n        boxSizing: 'content-box',\n      },\n      circle: {\n        position: 'absolute',\n        top: 20,\n        width: 260,\n        height: 260,\n        borderRadius: '100%',\n        backgroundColor: timePicker.clockCircleColor,\n      },\n    };\n\n    if (this.state.mode === 'hour') {\n      clock = (\n        <ClockHours\n          key=\"hours\"\n          format={this.props.format}\n          onChange={this.handleChangeHours}\n          initialHours={this.state.selectedTime.getHours()}\n        />\n      );\n    } else {\n      clock = (\n        <ClockMinutes\n          key=\"minutes\"\n          onChange={this.handleChangeMinutes}\n          initialMinutes={this.state.selectedTime.getMinutes()}\n        />\n      );\n    }\n\n    return (\n      <div style={prepareStyles(styles.root)}>\n        <TimeDisplay\n          selectedTime={this.state.selectedTime}\n          mode={this.state.mode}\n          format={this.props.format}\n          affix={this.getAffix()}\n          onSelectAffix={this.handleSelectAffix}\n          onSelectHour={this.setMode.bind(this, 'hour')}\n          onSelectMin={this.setMode.bind(this, 'minute')}\n        />\n        <div style={prepareStyles(styles.container)} >\n          <div style={prepareStyles(styles.circle)} />\n          {clock}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Clock;\n"]}